## Methods

- Data 
#### COCI
We used the March 2022 version of the COCI citation index [@doi:10.1007/s11192-019-03217-6] as the source of our citation data.
This dataset contains around 1.3 billion citations from ~73 million bibliographic resources.

#### Selecting fields
To differentiate between scientific fields, we needed a way to map papers to fields.
Fortunately, all the papers in Pubmed Central [CITE] have corresponding Medical Subject Headings (MeSH) terms.
While MeSH terms are varied and numerous, the subheadings of the Natural Science Disciplines (H01) category fit our needs.
However, MeSH terms are hierarchical, and vary greatly in their size and specificity.
To extract a balanced set of terms we recursively traversed the tree and selected headings with at least 10000 dois, that don't have multiple children that also meet the cutoff.
Our resulting set of headings contained 45 terms, from "Acoustics" to "Water Microbiology".

#### Building single heading citation networks
The COCI dataset consists of pairs of DOI identifiers.
To make these pairs into a form we could run calculations on, we needed to convert them into networks.
To do so, we created 45 empty networks, one for each MeSH term we selected previously.
We then iterated over each pair of dois in COCI, and added them to a network if the dois corresponded to two journal articles written in english, both of which were tagged with the corresponding MeSH heading.

#### Building combined networks
Because we were interested in the differences between fields, we also needed to build networks from pairs of MeSH headings.
These networks were built via the same process, except that instead of keeping articles corresponding to a single DOI we added a citation to the network if both articles were in the pair of fields, even if the citation occurred across fields.

#### Shuffling networks
Sampling a graph from the degree distribution while preserving the distribution of degrees in the network turned out to be challenging.
Because citation graphs are directed, it's not possible to simply swap pairs of edges and end up with a graph that is uniformly sampled from the space [CITE].
Instead, a more sophisticated three-edge swap method must be used [CITE Erdos].
Because this algorithm had not been implemented yet in NetworkX, we wrote the code to perform shuffles and submitted our change to the library [CITE PR?].

#### Splitting networks 


- Splitting citation networks

- Running Pagerank

- Calculating the percentile score
-- Also diff in percentiles

- Server details
-- Heading inclusion criteria
-- Journal inclusion criteria

